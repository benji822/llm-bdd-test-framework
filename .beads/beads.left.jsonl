{"id":"llm-bdd-test-framework-1dc","content_hash":"6918aa3c7c5b51e38a8d3dc6d734de8844d8df2bf4283f8a42be71013204d334","title":"Headless Selector Verifier (compile-time)","description":"Implement a headless verifier that loads each scenario route and resolves every step's locator using the same resolver. Fail fast on 0/ambiguous matches; emit `verification-report.json` and `selectors-usage.json`. Gate CI so tests do not run if verification fails.","acceptance_criteria":"- `llm-bdd verify` launches headless Chromium at E2E_BASE_URL and walks compiled steps.\n- Per-step outcomes include {strategy, selector, page, candidates?}.\n- 0 matches or unresolved ambiguity cause a non-zero exit and clear messaging.\n- Reports written to tests/artifacts with per-step details.\n- CI job fails before running Playwright if verification fails.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-12T16:30:21.571267293+08:00","updated_at":"2025-11-12T16:30:21.571267293+08:00","source_repo":".","labels":["ci","selectors","verification"],"dependencies":[{"issue_id":"llm-bdd-test-framework-1dc","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:30:26.826288076+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-40p","content_hash":"e80f80e04b7d27a256e70da83a3d6d33de5c9edccd8c03e442e2c286320650ef","title":"Selector-Registry-Driven Steps (no data-testid assumptions)","description":"Refactor the step execution layer to resolve elements via the selector registry and robust heuristics instead of assuming data-testids, so the framework works on arbitrary apps without HTML changes.","acceptance_criteria":"- Steps run on an app with no data-testid attributes and pass using the selector registry + heuristics.\n- Existing projects with data-testid keep working without change.\n- Pluggable strategy order (role/label/name/css/testid) via config/env.\n- Selector usage is auditable via logs; CI verifies referenced selector IDs or heuristic fallbacks.\n- README/docs updated with usage and migration notes.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-12T14:22:48.024942789+08:00","updated_at":"2025-11-12T16:28:45.5622639+08:00","closed_at":"2025-11-12T16:28:45.5622639+08:00","source_repo":".","labels":["bdd","deterministic","docs","playwright","selectors","stagehand"]}
{"id":"llm-bdd-test-framework-4lz","content_hash":"561d7e337c93f4fba1890929955b905eed340a3cce3da2d7b61392f5084d401a","title":"Authoring-only normalizer via BAML (optional)","description":"Integrate BoundaryML BAML as an authoring-time normalizer to produce typed Normalized YAML from QA text. Never used in CI. Include golden tests for the prompt and a dev script to generate normalized outputs.","acceptance_criteria":"- `yarn author:normalize` writes `tests/normalized/*.yaml` using BAML (only when configured).\n- Golden tests pass locally; CI does not run BAML.\n- Docs note BAML is optional and off in CI.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-12T16:31:47.202069974+08:00","updated_at":"2025-11-12T16:31:47.202069974+08:00","source_repo":".","labels":["authoring","baml","optional"],"dependencies":[{"issue_id":"llm-bdd-test-framework-4lz","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:31:53.69702914+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-604","content_hash":"5121901e0c5c9e875a9438c8ef8b32a94940d5f855f62d04b3d763a0e875c8e2","title":"Docs: selector-driven steps + migration guide","description":"Document the new selector resolution behavior and migration path:\n- How to use the selector registry and strategy env var.\n- How to add/curate registry entries.\n- Examples for apps with no data-testids.\n- Notes about CI verification and logging.","acceptance_criteria":"- README + docs/development updated with a dedicated section.\n- Example snippets for common selectors (role, label, name, css).\n- Link from Quick Start and Troubleshooting.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-12T14:23:44.199124402+08:00","updated_at":"2025-11-12T16:28:52.53873905+08:00","closed_at":"2025-11-12T16:28:52.53873905+08:00","source_repo":".","labels":["docs","playwright","selectors"],"dependencies":[{"issue_id":"llm-bdd-test-framework-604","depends_on_id":"llm-bdd-test-framework-40p","type":"parent-child","created_at":"2025-11-12T14:23:49.183894337+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-7ra","content_hash":"b763b1844777a3930b9e9fce56b24959ad0d911433129218fce100f88992ff5f","title":"Resolver: default strategy + scoping \u0026 disambiguation","description":"Finalize resolver defaults (role,label,text,type,name,placeholder,css,testid), add optional scoping (container/page), and improve ambiguity handling (rank by role match + text similarity + visibility). Ensure errors include strategy trace and suggested fixes.","acceptance_criteria":"- Default order applied when SELECTOR_STRATEGY is unset.\n- Scoping reduces multiple matches in common forms/tables.\n- Ambiguity errors show top candidates with why they lost; guidance to add registry IDs/aria-labels.\n- Telemetry logs `{strategy, selector, tokens, entryId?}` per step.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-12T16:30:48.144768404+08:00","updated_at":"2025-11-12T16:30:48.144768404+08:00","source_repo":".","labels":["resolver","selectors"],"dependencies":[{"issue_id":"llm-bdd-test-framework-7ra","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:30:53.180207562+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-a1u","content_hash":"ccd46adbfb8e17269ba92e115bc5ee5b7c512c9882d4d8f8bbf8b769e6c725ff","title":"No-Runtime-BDD v2: Compiler + Headless Verifier + Direct Playwright CI","description":"Redesign the project to deliver reliable, CI-safe E2E from QA specs without relying on Playwright-BDD at runtime or any LLM calls in CI. The pipeline compiles QA specs directly into @playwright/test specs, injects deterministic navigation using pages.yaml, verifies all selectors in a headless check before running tests, and runs Playwright. Stagehand/BAML become optional authoring tools only.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-12T16:29:34.391424162+08:00","updated_at":"2025-11-12T16:29:34.391424162+08:00","source_repo":".","labels":["architecture","ci","compiler","docs","playwright","verification"]}
{"id":"llm-bdd-test-framework-aet","content_hash":"0a986d7e4d5c75b231996b08ae7383ac82775bd90b795564f7927c3b0b1d1579","title":"pages.yaml + Navigation Injection","description":"Introduce `pages.yaml` to map page keys to routes. Compiler injects a guaranteed `page.goto(new URL(pages[key], E2E_BASE_URL))` as the first step of every scenario. Fail compilation if a referenced page key is missing.","acceptance_criteria":"- `pages.yaml` loaded and validated at compile time.\n- Missing page keys cause a clear compile error with file/line.\n- The first statement in each generated spec is `page.goto(...)` based on the mapped route.\n- Readiness probe after `goto` ensures the page is interactive.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-12T16:30:10.202736032+08:00","updated_at":"2025-11-15T12:06:08.893750981+08:00","closed_at":"2025-11-15T12:06:08.893750981+08:00","source_repo":".","labels":["compiler","navigation"],"dependencies":[{"issue_id":"llm-bdd-test-framework-aet","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:30:15.171126832+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-avm","content_hash":"b8240108d963e41cec694c83b3d0fb23f163dd0a427f29ccf98604e071f405b7","title":"CI: GitHub Actions compile→verify→run","description":"Add a GitHub Actions workflow that runs `llm-bdd compile`, `llm-bdd verify`, and `npx playwright test` with artifacts upload (Playwright report and verification reports). AUTHORING_MODE=false; no LLMs in CI.","acceptance_criteria":"- Workflow passes on the example app when selectors verify.\n- On verification failure, the job ends early with uploaded reports.\n- Stagehand/LLM are not invoked; logs confirm AUTHORING_MODE=false.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-12T16:31:25.302739301+08:00","updated_at":"2025-11-12T16:31:25.302739301+08:00","source_repo":".","labels":["ci","github-actions"],"dependencies":[{"issue_id":"llm-bdd-test-framework-avm","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:31:30.430226383+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-boe","content_hash":"d486fad308f7441dbdfef4d31e3aae472957ab976927ea3fef3ddcf795bb4a4c","title":"Docs: QA-first workflow (pages.yaml, connectors, ci)","description":"Rewrite README and docs to reflect the no-runtime-BDD design. Document pages.yaml, connectors.yaml, compile→verify→run flow, selector verification, resolver strategy, and example complex flow. Provide Quick Start and CI snippets.","acceptance_criteria":"- README updated with Quick Start (one-command UX) and CI.\n- New docs: pages.yaml, connectors.yaml, selector verification, resolver.\n- Example specs: simple login + player-claims-reward.\n- Troubleshooting guide for verification failures and selector drift.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-12T16:31:12.007759614+08:00","updated_at":"2025-11-12T16:31:12.007759614+08:00","source_repo":".","labels":["ci","docs","examples"],"dependencies":[{"issue_id":"llm-bdd-test-framework-boe","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:31:16.827899707+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-dr0","content_hash":"0e23416dc91d94c93cd2c45b63aad678c959ede0239e7081033da5ff677a29e1","title":"Improve resolver for text-only buttons like LOG IN","description":"Stagehand currently records selectors for buttons but the runtime only resolves registry entries or `[data-testid=…]`, so buttons defined purely by text/class (e.g., `\u003cbutton ...\u003eLOG IN\u003c/button\u003e`) fail to click. We need to capture richer hints during recording/compilation and update `selectorResolver` so it can resolve role/name/class heuristics instead of relying on manual button maps.\n\nPlan:\n1. Confirm how button selectors get recorded through the action graph builder/recorder and ensure selector IDs/locators include text/class/type metadata.\n2. Expand `selectorResolver` to accept the richer hints from `selector-hints.ts`, adding button-specific strategies (role/name/text fallback) when the hint indicates a `button` or `type=submit`.\n3. Update docs/tests to capture the new strategy; add a targeted scenario and `yarn bdd run` verification that clicks the LOG IN button.","acceptance_criteria":"- Given a page with a text-only button \u003cbutton type=\"submit\"\u003eLOG IN\u003c/button\u003e (no data-testid, no aria-label), the step \"And I click the submit button\" succeeds within default action timeout using resolver fallback strategies (no hardcoded maps).\n- With SELECTOR_STRATEGY unset, default order includes text fallback: role,label,text,name,placeholder,css,testid.\n- With SELECTOR_STRATEGY=text only, resolver matches by accessible name/inner text (case-insensitive, whitespace-normalized) and logs telemetry {strategy:\"text\", selector:\"getByRole('button',{name:/log in/i})\"}.\n- Existing flows with registry/testid continue to pass unchanged.\n- Docs updated (README + selector best practices) showing how text-only buttons are resolved and how to tune SELECTOR_STRATEGY.\n- Add a minimal Playwright test/fixture that renders the provided HTML snippet and verifies the click succeeds when running `yarn bdd run`.\n- No hardcoded button label maps remain in step code; interaction steps use selectorResolver exclusively.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-12T15:10:51.596182392+08:00","updated_at":"2025-11-12T16:28:35.506483908+08:00","closed_at":"2025-11-12T16:28:35.506483908+08:00","source_repo":".","labels":["bdd","playwright","selectors"],"dependencies":[{"issue_id":"llm-bdd-test-framework-dr0","depends_on_id":"llm-bdd-test-framework-40p","type":"parent-child","created_at":"2025-11-12T15:13:21.083549616+08:00","created_by":"daemon"},{"issue_id":"llm-bdd-test-framework-dr0","depends_on_id":"llm-bdd-test-framework-gcw","type":"related","created_at":"2025-11-12T15:13:25.350087659+08:00","created_by":"daemon"},{"issue_id":"llm-bdd-test-framework-dr0","depends_on_id":"llm-bdd-test-framework-pkt","type":"related","created_at":"2025-11-12T15:13:30.095063757+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-e06","content_hash":"a183688ddc1c3a23e16f2ea49b122d6ab27f918ea54607624e5fca689e03fc7c","title":"Stagehand-centric E2E Authoring (no clarifications)","description":"Design and implement a Stagehand-first pipeline replacing YAML/clarifications; deterministic CI; CLI now, UI later.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-08T18:06:28.984586695+08:00","updated_at":"2025-11-10T15:43:36.750621987+08:00","closed_at":"2025-11-10T15:43:36.750621987+08:00","source_repo":".","labels":["cli","e2e","no-clarifications","stagehand","ui"]}
{"id":"llm-bdd-test-framework-e3p","content_hash":"5d1dedfd3c5ea86557accc49f21ffeccfe6ad56c9da00a0f0073c39766ada3e3","title":"CLI: `llm-bdd ci|compile|verify` (one-command UX)","description":"Add a new CLI that compiles QA specs to direct Playwright, runs the compile-time verifier, and then runs Playwright tests. Ensure wrapper generation (playwright-bdd) is not required in CI path.","acceptance_criteria":"- `llm-bdd compile \u003cspecs\u003e` emits tests/e2e-gen/*.spec.ts.\n- `llm-bdd verify` runs the headless verifier and exits non-zero on failure.\n- `llm-bdd ci \u003cspecs\u003e` runs compile → verify → @playwright/test in order, failing fast on verification errors.\n- Docs updated with the new commands.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-12T16:30:33.320902217+08:00","updated_at":"2025-11-12T16:30:33.320902217+08:00","source_repo":".","labels":["cli","compiler","verification"],"dependencies":[{"issue_id":"llm-bdd-test-framework-e3p","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:30:38.691983282+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-egx","content_hash":"6c1a1ab15694af205d3578d09b674a7ea66020b497971b269c361c87aafb06dc","title":"Setup DSL + Connectors (seed users/rewards/etc.)","description":"Introduce a `setup` DSL in normalized specs and a `connectors.yaml` that declares HTTP/GraphQL/SQL actions to seed state (e.g., create user, create reward, assign reward). Support aliasing and referencing in testData. Ensure idempotency via unique prefixes/UUID.","acceptance_criteria":"- Spec supports `setup` with users/rewards/resources; compiler executes connectors before UI steps.\n- `connectors.yaml` variables resolved from env; secrets not logged.\n- Aliases ($player.id/email) available in steps/testData.\n- Sample complex flow (player claims reward) passes end-to-end locally and in CI.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-12T16:31:00.865785672+08:00","updated_at":"2025-11-12T16:31:00.865785672+08:00","source_repo":".","labels":["connectors","e2e","setup"],"dependencies":[{"issue_id":"llm-bdd-test-framework-egx","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:31:05.512583745+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-gcw","content_hash":"a31f684388d70301ff4c3273aa13b11af94f6d84885529a60070636f62a6b47e","title":"Refactor step definitions to use selector resolver","description":"Rewrite `navigation.steps.ts`, `interaction.steps.ts`, and `assertion.steps.ts` so they:\n- Use the new `selectorResolver` to find elements.\n- Accept both literal strings and placeholder tokens `\u003cENV_KEY\u003e`.\n- Support optional per-step selector ID hints if present in compiled metadata.\n- Keep backward compatibility where registry IDs resolve to testid if available.","acceptance_criteria":"- Existing feature files run unchanged on an app without data-testid using labels/name.\n- Steps log which selector strategy matched.\n- No hard-coded `[data-testid=...]` remains in step code.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-12T14:23:11.793687668+08:00","updated_at":"2025-11-12T16:28:39.773840488+08:00","closed_at":"2025-11-12T16:28:39.773840488+08:00","source_repo":".","labels":["bdd","playwright","steps"],"dependencies":[{"issue_id":"llm-bdd-test-framework-gcw","depends_on_id":"llm-bdd-test-framework-40p","type":"parent-child","created_at":"2025-11-12T14:23:16.172175767+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-hoo","content_hash":"a183688ddc1c3a23e16f2ea49b122d6ab27f918ea54607624e5fca689e03fc7c","title":"Stagehand-centric E2E Authoring (no clarifications)","description":"Design and implement a Stagehand-first pipeline replacing YAML/clarifications; deterministic CI; CLI now, UI later.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-08T18:06:35.711584269+08:00","updated_at":"2025-11-10T16:12:07.588165148+08:00","closed_at":"2025-11-10T16:12:07.588165148+08:00","source_repo":".","labels":["cli","e2e","no-clarifications","stagehand","ui"],"comments":[{"id":1,"issue_id":"llm-bdd-test-framework-hoo","author":"benji822","text":"Scope decision: remove clarifications step entirely. Authoring flows use Stagehand sessions to derive Action Graph; compiler emits deterministic tests; CI never calls LLM.","created_at":"2025-11-08T10:08:35Z"}]}
{"id":"llm-bdd-test-framework-hoo.10","content_hash":"5f61e8f831ebf8ebbfd5b7b231d806986a65b0ae5377e06beb263496f5fc94cb","title":"CI gating and deterministic policy","description":"Block Stagehand in CI; ensure cached/compiled tests only; add pipeline checks.","notes":"Implemented the CI policy guard script (`tests/scripts/ci-policy.ts`) plus `ci:policy`/`pretest` hooks and documentation so CI jobs fail fast when Stagehand authoring mode, mock login, or missing compiled artifacts would violate the deterministic policy. Guard checks `tests/normalized/`, `tests/features/`, and `tests/steps/generated/` before allowing `yarn test` to run.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T18:07:40.233104704+08:00","updated_at":"2025-11-10T14:57:59.615128856+08:00","closed_at":"2025-11-10T14:57:59.615128856+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"dependencies":[{"issue_id":"llm-bdd-test-framework-hoo.10","depends_on_id":"llm-bdd-test-framework-hoo.9","type":"blocks","created_at":"2025-11-08T18:08:10.004879005+08:00","created_by":"benji822"}]}
{"id":"llm-bdd-test-framework-hoo.11","content_hash":"f1678d0cdfd99948ee54912bba2df1550a812c99634e66a9af50c67c07a5c7a6","title":"Minimal HTTP API for future UI","description":"Expose /sessions, /compile, /run; file-backed jobs; stream logs.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-08T18:07:41.453907929+08:00","updated_at":"2025-11-12T16:29:08.890210163+08:00","closed_at":"2025-11-12T16:29:08.890210163+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"dependencies":[{"issue_id":"llm-bdd-test-framework-hoo.11","depends_on_id":"llm-bdd-test-framework-hoo.8","type":"blocks","created_at":"2025-11-08T18:08:15.256410462+08:00","created_by":"benji822"}]}
{"id":"llm-bdd-test-framework-hoo.12","content_hash":"5f057af423d798e1caae61f5afb81c3697dd19f1295a8ebdb9ea24338ac88067","title":"Replace legacy LLM pipeline; remove clarifications","description":"Remove clarifications/normalize steps; migrate docs and scripts; keep Playwright runner.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-08T18:07:42.660573696+08:00","updated_at":"2025-11-12T13:13:22.608400215+08:00","closed_at":"2025-11-12T13:13:22.608400215+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"dependencies":[{"issue_id":"llm-bdd-test-framework-hoo.12","depends_on_id":"llm-bdd-test-framework-hoo.8","type":"blocks","created_at":"2025-11-08T18:08:16.630998188+08:00","created_by":"benji822"},{"issue_id":"llm-bdd-test-framework-hoo.12","depends_on_id":"llm-bdd-test-framework-hoo.6","type":"blocks","created_at":"2025-11-08T18:08:17.941619444+08:00","created_by":"benji822"},{"issue_id":"llm-bdd-test-framework-hoo.12","depends_on_id":"llm-bdd-test-framework-hoo.7","type":"blocks","created_at":"2025-11-08T18:08:19.134174686+08:00","created_by":"benji822"}]}
{"id":"llm-bdd-test-framework-hoo.13","content_hash":"39a7e10f65231438eca9327d8086039cc21dbcd170ef35169136f865e488ff8a","title":"OpenRouter provider wiring (authoring only)","description":"Configure provider/model and keys; document costs; no CI dependency.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-08T18:07:43.976129039+08:00","updated_at":"2025-11-12T13:38:11.875273293+08:00","closed_at":"2025-11-12T13:38:11.875273293+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"]}
{"id":"llm-bdd-test-framework-hoo.14","content_hash":"467fb8aed8d1917e6a3e75231cd5c6c945e6cd1fdb1fdeb58383c8fad84a7a9f","title":"Provenance ledger (.ndjson) + cost metrics","description":"Append per action/test: tokens, duration, cache hits, hashes; redact secrets.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-08T18:07:45.224200814+08:00","updated_at":"2025-11-12T16:29:02.389537626+08:00","closed_at":"2025-11-12T16:29:02.389537626+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"dependencies":[{"issue_id":"llm-bdd-test-framework-hoo.14","depends_on_id":"llm-bdd-test-framework-hoo.8","type":"blocks","created_at":"2025-11-08T18:08:20.39139432+08:00","created_by":"benji822"}]}
{"id":"llm-bdd-test-framework-hoo.15","content_hash":"c0067a77d070a2839d2888426029b523624341507d495bea2d888a10e5f84a13","title":"Spike: record→compile→run a login flow","description":"Deliver end-to-end demo with deterministic CI replay and documented steps.","notes":"Outcome: E2E spike validated. Root cause of prior failures was sandboxed environment blocking local sockets (CODEX_SANDBOX_NETWORK_DISABLED=1), causing Chromium startup to abort. Workaround validated by running Playwright with network enabled (local sockets only). Evidence: 1) Smoke test passed. 2) Generated BDD login scenario passed with MOCK_LOGIN_APP=true.\n\nKey changes:\n- Added configurable launch toggles in `playwright.config.ts`:\n  - `PW_EXTRA_CHROME_ARGS`, `PW_IGNORE_NO_SANDBOX`, `PW_CHROME_PATH`, `PW_CHANNEL`.\n- Confirmed mock login app wiring via `tests/fixtures/stagehand-bdd.js` works.\n- Verified generated artifacts run: `tests/features/compiled/...authenticate-with-valid-credentials.feature` + matching steps.\n\nHow to run locally (non-sandbox):\n- `MOCK_LOGIN_APP=true yarn test` (uses bundled Chromium)\n- If needed: `PW_CHROME_PATH=/path/to/chrome MOCK_LOGIN_APP=true yarn test`\n- If distro supports SUID sandbox: `PW_IGNORE_NO_SANDBOX=true MOCK_LOGIN_APP=true yarn test`\n\nCI note:\n- Keep Stagehand/LLM off in CI; run compiled tests only. In strict sandboxes without sockets, use a compile-only job or run browser tests on a runner where local sockets are allowed.\n\nAcceptance (met): record→compile→run demo passes headless and is documented; deterministic replay uses mock app. ","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-08T18:07:46.553185799+08:00","updated_at":"2025-11-10T10:14:41.279571053+08:00","closed_at":"2025-11-10T10:14:41.279571053+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"dependencies":[{"issue_id":"llm-bdd-test-framework-hoo.15","depends_on_id":"llm-bdd-test-framework-hoo.4","type":"blocks","created_at":"2025-11-08T18:08:06.170729581+08:00","created_by":"benji822"},{"issue_id":"llm-bdd-test-framework-hoo.15","depends_on_id":"llm-bdd-test-framework-hoo.6","type":"blocks","created_at":"2025-11-08T18:08:07.46330086+08:00","created_by":"benji822"},{"issue_id":"llm-bdd-test-framework-hoo.15","depends_on_id":"llm-bdd-test-framework-hoo.7","type":"blocks","created_at":"2025-11-08T18:08:08.750239433+08:00","created_by":"benji822"},{"issue_id":"llm-bdd-test-framework-hoo.15","depends_on_id":"llm-bdd-test-framework-hoo.9","type":"blocks","created_at":"2025-11-08T18:08:21.656710052+08:00","created_by":"benji822"}]}
{"id":"llm-bdd-test-framework-hoo.3","content_hash":"f1acdad6536023826f2cc0a3e7f01523f52e6f4ed1271e41e227a42ba3b1dee5","title":"Test child (forced)","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-08T18:07:17.38995388+08:00","updated_at":"2025-11-12T16:29:14.351739715+08:00","closed_at":"2025-11-12T16:29:14.351739715+08:00","source_repo":".","labels":["stagehand"]}
{"id":"llm-bdd-test-framework-hoo.4","content_hash":"afd757dea6bb1b36c2d49dae002c70080882297f5c414e22a5d30a795056a197","title":"Stagehand runtime wrapper over Playwright","description":"Wrap Playwright page/session to expose observe/act/extract with caching and policy guards.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-08T18:07:32.539323149+08:00","updated_at":"2025-11-08T18:34:15.490166029+08:00","closed_at":"2025-11-08T18:34:15.490166029+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"comments":[{"id":2,"issue_id":"llm-bdd-test-framework-hoo.4","author":"benji822","text":"Implemented authoring-mode guards; fixed Stagehand import/types; added Playwright decorator `withStagehand(page)` to attach observe/act/extract. Wrapper now enforces deterministic CI (blocks live LLM calls when `authoringMode=false` in CI) and caches results via `StagehandCache`.","created_at":"2025-11-08T10:25:12Z"},{"id":3,"issue_id":"llm-bdd-test-framework-hoo.4","author":"benji822","text":"Unit-tested Stagehand wrapper and CI policy guards. Summary:\\n\\n- Added authoring guards in observe/act/extract; blocks uncached calls in CI unless authoringMode=true.\\n- Fixed import/types to use Stagehand v3 directly.\\n- Exposed Playwright decorator: withStagehand(page).\\n- Wrote focused unit tests using local Stagehand mock; no browser/LLM network.\\n\\nFiles:\\n- tests/scripts/stagehand/wrapper.ts\\n- tests/scripts/stagehand/index.ts\\n- tests/scripts/stagehand/types.ts (type-only Playwright import)\\n- tests/mocks/node_modules/@browserbasehq/stagehand/index.js (mock)\\n- tests/mocks/register-stagehand-mock.js (runtime hook)\\n- tests/unit/stagehand-wrapper.test.ts (unit tests)\\n- tsconfig.unit.json (unit build config)\\n\\nHow to run locally:\\n- PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=1 npm ci\\n- ./node_modules/.bin/tsc -p tsconfig.unit.json\\n- NODE_PATH=tests/mocks/node_modules:node_modules node --require ./tests/mocks/register-stagehand-mock.js dist-unit/unit/stagehand-wrapper.test.js\\n\\nAll tests passed on Nov 8, 2025.","created_at":"2025-11-08T10:34:00Z"}]}
{"id":"llm-bdd-test-framework-hoo.5","content_hash":"17d20b18c639260e6c692fb3f8fb709025396034dfe4de379839583ded1bdf17","title":"Define Action Graph schema + persistence","description":"Design typed nodes, I/O format, and write/read to artifacts/graph/*.json with versioning.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-08T18:07:33.793102035+08:00","updated_at":"2025-11-09T15:49:30.334089053+08:00","closed_at":"2025-11-09T15:49:30.334089053+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"comments":[{"id":4,"issue_id":"llm-bdd-test-framework-hoo.5","author":"benji822","text":"2025-11-09 code review findings:\n- Deleted tests/__tests__ regression suites → no coverage for normalize/collect/questions/etc.\n- GraphPersistence indexes graphs only by specId; any second scenario overwrites read() results.\n- yamlToActionGraph leaves every node type as act, drops testData, disconnects background nodes, and infers authorship via llmProvider=='cli'.\n- Schema $id points at cazino-frontend.com which we do not own.","created_at":"2025-11-09T07:21:03Z"},{"id":5,"issue_id":"llm-bdd-test-framework-hoo.5","author":"benji822","text":"Implemented action-graph fixes: restored regression suites, expanded builder to capture background sequencing + testData + authorship, and renamed persistence files per spec+scenario with new schema coverage. tsc + unit suites now pass.","created_at":"2025-11-09T07:49:22Z"}]}
{"id":"llm-bdd-test-framework-hoo.6","content_hash":"68eebed5ad4f87cdd08b173c5a6a06f3775af5a8baa6a146e504107e78b68e70","title":"Compiler: Action Graph → Gherkin + step defs","description":"Generate .feature and deterministic Playwright steps; no Stagehand in runtime.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-08T18:07:35.174339311+08:00","updated_at":"2025-11-09T16:29:09.37088241+08:00","closed_at":"2025-11-09T16:29:09.37088241+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"dependencies":[{"issue_id":"llm-bdd-test-framework-hoo.6","depends_on_id":"llm-bdd-test-framework-hoo.5","type":"blocks","created_at":"2025-11-08T18:08:05.034595294+08:00","created_by":"benji822"}]}
{"id":"llm-bdd-test-framework-hoo.7","content_hash":"be0e5f54523b8c0f6efe12a2465101781e64bc2fec5f761c9d2c813a0d51c211","title":"Selector registry + drift validator","description":"Single source of selectors with verification and suggested updates; artifacts/selectors/registry.json.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-08T18:07:36.40883233+08:00","updated_at":"2025-11-09T16:58:54.739778534+08:00","closed_at":"2025-11-09T16:58:54.739778534+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"]}
{"id":"llm-bdd-test-framework-hoo.8","content_hash":"d7be5d79080b7d6e7f73de13d4a287c6e4822dffc061465df698fd99cd9c2126","title":"Umbrella CLI 'bdd' (init, record, compile, run, verify)","description":"Single entrypoint mapping to services; friendly output and non-zero exit codes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-08T18:07:37.697880824+08:00","updated_at":"2025-11-10T17:11:55.421735371+08:00","closed_at":"2025-11-10T17:11:55.421735371+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"dependencies":[{"issue_id":"llm-bdd-test-framework-hoo.8","depends_on_id":"llm-bdd-test-framework-hoo.4","type":"blocks","created_at":"2025-11-08T18:08:11.372963097+08:00","created_by":"benji822"},{"issue_id":"llm-bdd-test-framework-hoo.8","depends_on_id":"llm-bdd-test-framework-hoo.6","type":"blocks","created_at":"2025-11-08T18:08:12.688051417+08:00","created_by":"benji822"},{"issue_id":"llm-bdd-test-framework-hoo.8","depends_on_id":"llm-bdd-test-framework-hoo.7","type":"blocks","created_at":"2025-11-08T18:08:14.039221834+08:00","created_by":"benji822"}]}
{"id":"llm-bdd-test-framework-hoo.9","content_hash":"11f94d36a4cb1d5d8310befb6732f7941b1290ae985f61a0a4ec18a20f44e355","title":"Stagehand cache + authoring/CI policy toggles","description":"Enable STAGEHAND_CACHE_DIR and AUTHORING_MODE env flags; enforce CI LLM-off.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T18:07:38.940333615+08:00","updated_at":"2025-11-09T16:08:56.941590022+08:00","closed_at":"2025-11-09T16:08:56.941590022+08:00","source_repo":".","labels":["cli","deterministic","e2e","no-clarifications","stagehand","ui"],"comments":[{"id":6,"issue_id":"llm-bdd-test-framework-hoo.9","author":"benji822","text":"Wired StagehandWrapper defaults to STAGEHAND_CACHE_DIR/AUTHORING_MODE, tightened CI guard messaging, extended tests, and documented the new env toggles.","created_at":"2025-11-09T08:08:35Z"}]}
{"id":"llm-bdd-test-framework-o89","content_hash":"c1d09cc3bc5adb806e30f9a5fd725891c7323e2640b20cc650cc705346cf95df","title":"Expose selector hints from compiler to generated specs","description":"Emit per-step selector ID hints into generated artifacts so runtime step code can resolve exact elements:\n- Add selector ID(s) to `bddFileData` or as inline comments in generated spec wrappers.\n- Plumb through action-graph node.selector IDs → feature → spec wrapper.\n- Ensure hints are optional; resolver falls back to heuristics when absent.","acceptance_criteria":"- Generated spec wrapper includes selector IDs for steps that referenced selectors during recording.\n- Step layer can read these IDs during execution.\n- If IDs are missing, tests still pass using resolver heuristics.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-12T14:23:22.161488457+08:00","updated_at":"2025-11-12T15:05:12.69364454+08:00","closed_at":"2025-11-12T15:05:12.69364454+08:00","source_repo":".","labels":["artifacts","compiler","selectors"],"dependencies":[{"issue_id":"llm-bdd-test-framework-o89","depends_on_id":"llm-bdd-test-framework-40p","type":"parent-child","created_at":"2025-11-12T14:23:26.376148199+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-pkt","content_hash":"b48c5f6119f68fe2b4bf7257e1e807db4937e8bfb5884c86d6e3e17e4aefeea9","title":"Selector validation and CI guard updates","description":"Update `validate-selectors` and `spec:ci-verify` so they:\n- Report which steps rely on registry IDs vs. heuristics.\n- Fail when zero strategies match (clear error message + hint to add a registry entry).\n- Optionally enforce a minimum stability/priority for matched selectors via config.","acceptance_criteria":"- CI bundle includes a selectors usage report per step.\n- `yarn bdd verify` fails with actionable messages when selectors are missing.\n- Configurable policy for allowed strategies (e.g., role/label only).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-12T14:23:33.209076547+08:00","updated_at":"2025-11-12T16:28:57.384974308+08:00","closed_at":"2025-11-12T16:28:57.384974308+08:00","source_repo":".","labels":["ci","selectors","validation"],"dependencies":[{"issue_id":"llm-bdd-test-framework-pkt","depends_on_id":"llm-bdd-test-framework-40p","type":"parent-child","created_at":"2025-11-12T14:23:37.356460578+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-pqz","content_hash":"2c8c522054b82300f64f74051051b943550941e32669e4d7bfeb2df4b58ea9ff","title":"Selector resolver + registry loader utility","description":"Introduce a `selectorResolver(page, idOrHint, options)` that:\n- Loads `tests/artifacts/selectors/registry.json` once and caches it.\n- Supports lookup by selector ID (exact), or by hint tokens such as `email`/`password` when no ID is provided.\n- Resolves to a Playwright locator using a strategy chain: role → label → name attribute → placeholder → CSS → testid (configurable order).\n- Exposes telemetry (which strategy matched) for audit.","acceptance_criteria":"- Given a minimal HTML without data-testid, resolver can fill email/password by label or name.\n- Resolver returns a `Locator` and logs `{strategy, selector}`.\n- Fallback order can be changed via env `SELECTOR_STRATEGY=role,label,name,placeholder,css,testid`.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-12T14:22:58.894591257+08:00","updated_at":"2025-11-12T14:29:39.159965962+08:00","closed_at":"2025-11-12T14:29:39.159965962+08:00","source_repo":".","labels":["bdd","playwright","selectors"],"dependencies":[{"issue_id":"llm-bdd-test-framework-pqz","depends_on_id":"llm-bdd-test-framework-40p","type":"parent-child","created_at":"2025-11-12T14:23:02.634045472+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-umw","content_hash":"b52cf059fb901b3f0225d5228aa80819935f06195565f1ad83e28e31a7629251","title":"Deprecate runtime BDD in CI; keep .feature as docs","description":"Remove playwright-bdd from the CI execution path. Keep .feature generation optional for documentation/human review, but CI runs direct @playwright/test only. Provide migration notes and a compatibility switch for local dev.","acceptance_criteria":"- CI path uses only direct specs; no `npx playwright-bdd test` in CI.\n- A `--emit-feature` option writes .feature files for docs, not execution.\n- Migration doc explains the change and how to run old BDD locally if desired.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-12T16:31:36.743113193+08:00","updated_at":"2025-11-12T16:31:36.743113193+08:00","source_repo":".","labels":["ci","deprecation","docs"],"dependencies":[{"issue_id":"llm-bdd-test-framework-umw","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:31:41.055602071+08:00","created_by":"daemon"}]}
{"id":"llm-bdd-test-framework-yg7","content_hash":"f92b8e07cd1939c52f685820067d9544f19eb263d43a7cc1e25c0e7b88b5151e","title":"Compiler: Direct @playwright/test emitter (no runtime BDD)","description":"Emit deterministic Playwright specs from QA specs without playwright-bdd. Write to `tests/e2e-gen/*.spec.ts`. Support step vocabulary, ENV placeholders, and per-step selector hints. Ensure first step is a deterministic `page.goto()` (in conjunction with pages.yaml).","acceptance_criteria":"- Given a QA spec and pages.yaml, running `llm-bdd compile` produces `tests/e2e-gen/*.spec.ts`.\n- First statement of each spec is a `page.goto()` derived from pages.yaml and E2E_BASE_URL.\n- Steps use compiled locators or pass hints to the resolver (no BDD runtime).\n- Running `npx playwright test tests/e2e-gen` executes tests successfully when verification is green.","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-11-12T16:29:57.923511333+08:00","updated_at":"2025-11-12T16:44:40.034712339+08:00","source_repo":".","labels":["compiler","deterministic","playwright"],"dependencies":[{"issue_id":"llm-bdd-test-framework-yg7","depends_on_id":"llm-bdd-test-framework-a1u","type":"parent-child","created_at":"2025-11-12T16:30:03.088497775+08:00","created_by":"daemon"}]}
